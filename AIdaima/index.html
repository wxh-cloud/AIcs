<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <style>
        @keyframes breathing {
            0% { box-shadow: 0 0 5px rgba(52, 168, 83, 0.4); }
            50% { box-shadow: 0 0 20px rgba(52, 168, 83, 0.8); }
            100% { box-shadow: 0 0 5px rgba(52, 168, 83, 0.4); }
        }
        .breathing-light { animation: breathing 3s infinite ease-in-out; }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>运维问题跟踪系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // 模态框拖拽功能 - 等待DOM加载完成
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('add-task-modal');
            if (!modal) return; // 确保模态框存在
            
            const modalHeader = modal.querySelector('.border-b');
            const resizeHandle = document.getElementById('resize-handle');
            if (!modalHeader || !resizeHandle) return; // 确保元素存在
            
            let isDragging = false;
            let isResizing = false;
            let dragStartX, dragStartY, modalStartX, modalStartY;
            let resizeStartX, resizeStartY, modalStartWidth, modalStartHeight;

            // 拖拽开始
            modalHeader.addEventListener('mousedown', (e) => {
                isDragging = true;
                dragStartX = e.clientX;
                dragStartY = e.clientY;
                modalStartX = modal.offsetLeft;
                modalStartY = modal.offsetTop;
                modalHeader.style.cursor = 'grabbing';
            });

            // 窗口移动
            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const dx = e.clientX - dragStartX;
                    const dy = e.clientY - dragStartY;
                    modal.style.left = `${modalStartX + dx}px`;
                    modal.style.top = `${modalStartY + dy}px`;
                    modal.style.transform = 'none'; // 禁用居中transform
                }

                if (isResizing) {
                    const dx = e.clientX - resizeStartX;
                    const dy = e.clientY - resizeStartY;
                    const newWidth = Math.max(400, modalStartWidth + dx);
                    const newHeight = Math.max(300, modalStartHeight + dy);
                    modal.querySelector('div').style.width = `${newWidth}px`;
                    modal.querySelector('div').style.maxWidth = '90vw';
                    modal.querySelector('div').style.height = `${newHeight}px`;
                    modal.querySelector('div').style.maxHeight = '90vh';
                }
            });

            // 拖拽结束
            document.addEventListener('mouseup', () => {
                isDragging = false;
                isResizing = false;
                modalHeader.style.cursor = 'grab';
                resizeHandle.style.cursor = 'se-resize';
            });

            // 缩放开始
            resizeHandle.addEventListener('mousedown', (e) => {
                e.stopPropagation();
                isResizing = true;
                resizeStartX = e.clientX;
                resizeStartY = e.clientY;
                const modalContent = modal.querySelector('div');
                modalStartWidth = modalContent.offsetWidth;
                modalStartHeight = modalContent.offsetHeight;
                resizeHandle.style.cursor = 'grabbing';
            });
        });
    </script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1677ff',
                        secondary: '#69b1ff',
                        success: '#52c41a',
                        warning: '#faad14',
                        danger: '#ff4d4f',
                        dark: '#1f2937',
                        light: '#f9fafb'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-shadow {
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            }
            .nav-active {
                @apply bg-primary/10;
            }
            .nav-active a {
                @apply text-primary;
            }
            .calendar-day {
                aspect-ratio: 1/1;
            }
            .calendar-day-current {
                @apply bg-primary text-white rounded-full;
            }
            .calendar-day-has-task {
                @apply relative;
            }
            .calendar-day-has-task::after {
                content: '';
                position: absolute;
                bottom: 4px;
                left: 50%;
                transform: translateX(-50%);
                width: 4px;
                height: 4px;
                border-radius: 50%;
                @apply bg-primary;
            }
            @keyframes breathe {
                0%, 100% { box-shadow: 0 0 5px rgba(22, 119, 255, 0.5); }
                50% { box-shadow: 0 0 20px rgba(22, 119, 255, 0.8); }
            }
            .breathing-light {
                animation: breathe 2s infinite ease-in-out;
            }
        }
    </style>
</head>
<body class="font-inter bg-gray-50 text-dark flex flex-col h-screen">
    <div class="flex h-screen">
        <!-- 侧边导航 -->
        <div class="flex">
            <aside id="sidebar" class="w-56 bg-white border-r-2 border-gray-200 hidden md:block transition-all duration-300 ease-in-out z-20 p-2">
            <div id="sidebar-profile" class="p-4 flex flex-col items-center py-4 rounded-lg mb-2 border border-gray-200 overflow-hidden transition-all duration-300 hover:shadow-lg">
                <div class="w-20 h-10 rounded-lg mb-4 bg-gray-100 flex items-center justify-center hover:bg-primary transition-all duration-300 mx-auto transform hover:scale-110 breathing-light">
                    <span style="color: #1a73e8; font-weight: bold; font-size: 16px;">Y</span>
                    <span style="color: #ea4335; font-weight: bold; font-size: 16px;">C</span>
                    <span style="color: #fbbc05; font-weight: bold; font-size: 16px;">I</span>
                    <span style="color: #34a853; font-weight: bold; font-size: 16px;">H</span>
                </div>
                <h1 class="text-xl font-bold text-dark text-center tracking-wide mt-1">云南建投i8问题</h1>
                <div id="current-date" class="text-sm font-bold text-gray-800 text-center mt-1 mb-0"></div>
<p class="text-sm font-bold text-gray-800 mt-0 px-4 text-center max-w-xs leading-relaxed">王小航</p>            </div>
            <nav class="py-4 space-y-2">
                <div class="border border-gray-200 rounded-lg overflow-hidden"><a href="#profile" class="flex items-center space-x-3 px-4 py-3 group transition-all duration-200 w-full">
                    <div class="w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-gray-600 group-hover:bg-primary group-hover:text-white transition-colors mx-auto breathing-light">
                        <i class="fa fa-user"></i>
                    </div>
                    <span class="text-sm font-medium">个人资料</span>
                </a></div>
                <div class="border border-gray-200 rounded-lg overflow-hidden"><a href="#today-tasks" class="flex items-center space-x-3 px-4 py-3 hover:bg-gray-100 transition-colors group w-full">
                    <div class="w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-gray-600 group-hover:bg-primary group-hover:text-white transition-colors mx-auto breathing-light">
                        <i class="fa fa-tasks"></i>
                    </div>
                    <span class="text-sm font-medium">任务情况</span>
                </a></div>
                <div class="border border-gray-200 rounded-lg overflow-hidden"><a href="#dashboard" class="flex items-center space-x-3 px-4 py-3 hover:bg-gray-100 transition-colors group w-full">
                    <div class="w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-gray-600 group-hover:bg-primary group-hover:text-white transition-colors mx-auto breathing-light">
                        <i class="fa fa-dashboard"></i>
                    </div>
                    <span class="text-sm font-medium">数据看板</span>
                </a></div>
                <div class="border border-gray-200 rounded-lg overflow-hidden"><a href="#issues" class="flex items-center space-x-3 px-4 py-3 hover:bg-gray-100 transition-colors group w-full">
                    <div class="w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-gray-600 group-hover:bg-primary group-hover:text-white transition-colors mx-auto breathing-light">
                        <i class="fa fa-list-ul"></i>
                    </div>
                    <span class="text-sm font-medium">问题清单</span>
                </a></div>

            </nav>
        </aside>

        <!-- 主内容区 -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- 顶部导航 -->
            <header class="bg-white border-b border-gray-200 py-0.5 px-4 flex items-center justify-between">
                <div class="flex items-center">
                    <button id="mobile-menu-button" class="md:hidden mr-2 text-gray-500">
                        <i class="fa fa-bars text-xl"></i>
                    </button>

                </div>
                <div class="flex items-center space-x-4">


                </div>
            </header>

            <!-- 内容滚动区域 -->
            <main class="flex-1 main-container pl-4 w-full flex flex-col min-h-0">
                <div class="overflow-y-auto main-content h-full pb-0">
    <!-- 个人信息展示区 -->
    <section id="profile" class="mb-8 animate-fadeIn bg-white text-dark rounded-2xl p-6 shadow-lg border border-gray-200">
        <div class="flex flex-col md:flex-row items-center justify-between">
            <div class="flex items-center mb-4 md:mb-0">
                <div class="w-20 h-20 rounded-full border-4 border-white/30 flex items-center justify-center bg-white/10 mr-4 animate-pulse">
                    <i class="fa fa-user-circle text-4xl text-primary"></i>
                </div>
                <div>
                    <h2 class="text-xl font-bold">王小航</h2>
                    <p class="text-gray-500 text-sm mr-4">负责工作：i8系统问题BUG，需求，报表，打印模版等，系统有问题可点击右侧下发任务直接提出</p>
                    <div class="flex items-center mt-2">
                        <div id="main-content-datetime" class="text-sm text-gray-500 mr-4"></div>
                        <span class="text-sm text-gray-500"></i> 今日已工作 4.5 小时</span><span class="text-sm text-gray-500 ml-4"><i class="fa fa-check-circle mr-1"></i> 今日已处理 3 个问题</span>
                    </div>
                </div>
            </div>
            <div class="flex space-x-3">
                <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center">
                    <i class="fa fa-user-circle mr-2"></i> 个人资料
                </button>
                <button class="bg-primary text-white border-0 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center" onclick="document.getElementById('add-task-modal').classList.remove('hidden')">
                      <i class="fa fa-bell mr-2"></i> 下发任务
                </button>
            </div>
        </div>
    </section>

    <!-- 任务情况模块 -->
    <div id="today-tasks" class="bg-white rounded-xl p-6 card-shadow mb-8">
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center">
                <h2 class="text-xl font-bold text-black">任务情况</h2>
                <div class="loading-box ml-2">
                    <i class="fa fa-cog fa-spin text-lg"></i>
                </div>
            </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- 今日任务 -->
            <div>
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-[2px] font-bold text-black">今日任务</h3>
                    <span class="text-sm text-gray-500">5 项任务</span>
                </div>
                
                <!-- 垂直时间线容器 -->
                <div class="relative pl-10">
                    <!-- 中轴线 -->
                    <div class="absolute left-0 top-0 bottom-0 w-0.5 bg-gray-200 ml-3"></div>
                    
                    <!-- 时间段节点 1 -->
                    <div class="timeline-node mb-8 relative">
                        <!-- 节点标记 -->
                        <div class="absolute left-0 w-7 h-7 rounded-full bg-primary text-white flex items-center justify-center -ml-10 z-10">
                            <i class="fa fa-clock-o"></i>
                        </div>
                        
                        <!-- 时间段标题 -->
                        <div class="font-semibold text-primary mb-2">09:00 - 10:00</div>
                        
                        <!-- 任务内容 -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <div class="task-item p-3 border border-green-100 bg-green-50 rounded-lg">
                                <div class="font-medium text-sm">数据库备份检查</div>
                                <div class="text-sm text-gray-500 mt-1">低 · 王五</div>
                                <div class="flex items-center mt-2">
                                    <span class="text-xs px-2 py-1 bg-success/10 text-success rounded-full">已完成</span>
                                    <span class="text-xs text-gray-500 ml-2">09:00 - 09:30</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 阶段箭头 -->
                        <div class="absolute left-0 top-full w-6 h-6 transform -translate-x-1/2 -translate-y-1/2 text-gray-300">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 5v14M19 12l-7 7-7-7"></path>
                            </svg>
                        </div>

                        <div>
  </div>
                    </div>
                    
                    <!-- 时间段节点 2 -->
                    <div class="timeline-node mb-8 relative">
                        <div class="absolute left-0 w-7 h-7 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center -ml-10 z-10">
                            <i class="fa fa-clock-o"></i>
                        </div>
                        <div class="font-semibold text-gray-500 mb-2">10:00 - 11:00</div>
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 shadow-sm">
                            <div class="text-sm text-gray-400 italic">无任务安排</div>
                        </div>
                        <div class="absolute left-0 top-full w-6 h-6 transform -translate-x-1/2 -translate-y-1/2 text-gray-300">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 5v14M19 12l-7 7-7-7"></path>
                            </svg>
                        </div>
                    </div>
                    
                    <!-- 时间段节点 3 -->
                    <div class="timeline-node mb-8 relative">
                        <div class="absolute left-0 w-7 h-7 rounded-full bg-primary text-white flex items-center justify-center -ml-10 z-10">
                            <i class="fa fa-clock-o"></i>
                        </div>
                        <div class="font-semibold text-primary mb-2">14:30 - 15:30</div>
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <div class="task-item p-3 border border-red-100 bg-red-50 rounded-lg">
                                <div class="font-medium text-sm">API服务不可用故障处理</div>
                                <div class="text-sm text-gray-500 mt-1">紧急 · 张三</div>
                                <div class="flex items-center mt-2">
                                    <span class="text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded">处理中</span>
                                    <span class="text-xs text-gray-500 ml-2">14:30 - 15:30</span>
                                </div>
                            </div>
                        </div>
                        <div class="absolute left-0 top-full w-6 h-6 transform -translate-x-1/2 -translate-y-1/2 text-gray-300">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 5v14M19 12l-7 7-7-7"></path>
                            </svg>
                        </div>
                    </div>
                    
                    <!-- 时间段节点 4 -->
                    <div class="timeline-node relative">
                        <div class="absolute left-0 w-7 h-7 rounded-full bg-primary text-white flex items-center justify-center -ml-10 z-10">
                            <i class="fa fa-clock-o"></i>
                        </div>
                        <div class="font-semibold text-primary mb-2">16:00 - 17:00</div>
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <div class="task-item p-3 border border-orange-100 bg-orange-50 rounded-lg">
                                <div class="font-medium text-sm">数据库性能优化</div>
                                <div class="text-sm text-gray-500 mt-1">高 · 李四</div>
                                <div class="flex items-center mt-2">
                                    <span class="text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded">未开始</span>
                                    <span class="text-xs text-gray-500 ml-2">16:00 - 17:00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 即将到来的任务 -->
            <div>
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-[0.25rem] font-semibold text-black">即将到来的任务</h3>
                    <span class="text-sm text-gray-500">3 项任务</span>
                </div>
                
                <!-- 垂直时间线容器 -->
                <div class="relative pl-10">
                    <!-- 中轴线 -->
                    <div class="absolute left-0 top-0 bottom-0 w-0.5 bg-gray-200 ml-3"></div>
                    
                    <!-- 时间段节点 1 -->
                    <div class="timeline-node mb-8 relative">
                        <!-- 节点标记 -->
                        <div class="absolute left-0 w-7 h-7 rounded-full bg-primary text-white flex items-center justify-center -ml-10 z-10">
                            <i class="fa fa-calendar"></i>
                        </div>
                        
                        <!-- 时间段标题 -->
                        <div class="font-semibold text-primary mb-2">明天</div>
                        
                        <!-- 任务内容 -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <div class="task-item p-3 border border-yellow-100 bg-yellow-50 rounded-lg">
                                <div class="font-medium text-sm">系统安全漏洞修复</div>
                                <div class="text-sm text-gray-500 mt-1">中 · 王五</div>
                                <div class="flex items-center mt-2">
                                    <span class="text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded">未开始</span>
                                    <span class="text-xs text-gray-500 ml-2">预计 09:00 - 11:00</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 阶段箭头 -->
                        <div class="absolute left-0 top-full w-6 h-6 transform -translate-x-1/2 -translate-y-1/2 text-gray-300">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 5v14M19 12l-7 7-7-7"></path>
                            </svg>
                        </div>
                    </div>
                    
                    <!-- 时间段节点 2 -->
                    <div class="timeline-node mb-8 relative">
                        <div class="absolute left-0 w-7 h-7 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center -ml-10 z-10">
                            <i class="fa fa-calendar"></i>
                        </div>
                        <div class="font-semibold text-gray-500 mb-2">周四</div>
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 shadow-sm">
                            <div class="text-sm text-gray-400 italic">无任务安排</div>
                        </div>
                        <div class="absolute left-0 top-full w-6 h-6 transform -translate-x-1/2 -translate-y-1/2 text-gray-300">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 5v14M19 12l-7 7-7-7"></path>
                            </svg>
                        </div>
                    </div>
                    
                    <!-- 时间段节点 3 -->
                    <div class="timeline-node relative">
                        <div class="absolute left-0 w-7 h-7 rounded-full bg-primary text-white flex items-center justify-center -ml-10 z-10">
                            <i class="fa fa-calendar"></i>
                        </div>
                        <div class="font-semibold text-primary mb-2">周五</div>
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 shadow-sm hover:shadow-md transition-shadow">
                            <div class="task-item p-3 border border-green-100 bg-green-50 rounded-lg">
                                <div class="font-medium text-sm">每周系统维护</div>
                                <div class="text-sm text-gray-500 mt-1">低 · 赵六</div>
                                <div class="flex items-center mt-2">
                                    <span class="text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded">未开始</span>
                                    <span class="text-xs text-gray-500 ml-2">预计 14:00 - 16:00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
                
                <!-- 数据概览 -->
                <div id="dashboard" class="mb-8">
                    <div class="bg-white rounded-xl p-6 card-shadow mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <div class="flex items-center mb-6"><h2 class="text-xl font-bold text-black">数据看板</h2><div class="loading-box ml-2"><i class="fa fa-cube fa-spin text-primary text-lg"></i></div></div>
                        <div class="flex space-x-2">
                            <button class="bg-white border border-gray-300 rounded-lg px-4 py-2 text-sm hover:bg-gray-50 transition-colors">
                                <i class="fa fa-download mr-1"></i> 导出报表
                            </button>
                            <button class="bg-primary text-white rounded-lg px-4 py-2 text-sm hover:bg-primary/90 transition-colors">
                                <i class="fa fa-refresh mr-1"></i> 刷新数据
                            </button>
                        </div>
                    </div>

                    <!-- 统计卡片 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                        <div class="bg-white rounded-xl p-6 card-shadow hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-500 text-sm">本月新增问题</p>
                                    <h3 class="text-2xl font-bold mt-1 mb-2">0</h3>
                                    <p class="text-success text-sm flex items-center">
                                        <i class="fa fa-arrow-up mr-1"></i> 0% <span class="text-gray-500 ml-1">较上月</span>
                                    </p>
                                </div>
                                <div class="w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center text-primary">
                                    <i class="fa fa-exclamation-circle text-xl"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 card-shadow hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-500 text-sm">本日新增问题</p>
                                    <h3 class="text-2xl font-bold mt-1 mb-2">0</h3>
                                    <p class="text-danger text-sm flex items-center">
                                        <i class="fa fa-arrow-down mr-1"></i> 0% <span class="text-gray-500 ml-1">较昨日</span>
                                    </p>
                                </div>
                                <div class="w-12 h-12 rounded-lg bg-secondary/10 flex items-center justify-center text-secondary">
                                    <i class="fa fa-calendar-check-o text-xl"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 card-shadow hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-500 text-sm">待处理问题</p>
                                    <h3 class="text-2xl font-bold mt-1 mb-2">0</h3>
                                    <p class="text-warning text-sm flex items-center">
                                        <i class="fa fa-clock-o mr-1"></i> 24小时平均处理时间
                                    </p>
                                </div>
                                <div class="w-12 h-12 rounded-lg bg-warning/10 flex items-center justify-center text-warning">
                                    <i class="fa fa-cog fa-spin text-xl"></i>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-6 card-shadow hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-500 text-sm">已解决问题</p>
                                    <h3 class="text-2xl font-bold mt-1 mb-2">0</h3>
                                    <p class="text-success text-sm flex items-center">
                                        <i class="fa fa-check-circle mr-1"></i> 0% <span class="text-gray-500 ml-1">解决率</span>
                                    </p>
                                </div>
                                <div class="w-12 h-12 rounded-lg bg-success/10 flex items-center justify-center text-success">
                                    <i class="fa fa-check text-xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 图表区域 -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white rounded-xl p-6 card-shadow lg:col-span-2">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-[0.9875rem] font-bold text-black">问题趋势分析</h2>
                                <div class="flex space-x-2">
                                    <button id="calendar-month-btn" class="px-3 py-1 text-sm rounded-md hover:bg-gray-100">月</button>
                                    <button id="calendar-week-btn" class="px-3 py-1 text-sm rounded-md bg-primary/10 text-primary">周</button>
                                    
                                </div>
                            </div>
                            <div class="h-80">
                                <canvas id="trendChart"></canvas>
                            </div>
                        </div>
                        <div id="today-tasks" class="bg-white rounded-xl p-6 card-shadow">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-[0.9875rem] font-bold text-black">问题分类占比</h2>
                                <button class="text-gray-400 hover:text-gray-600">
                                    <i class="fa fa-ellipsis-v"></i>
                                </button>
                            </div>
                            <div class="h-80">
                                <canvas id="categoryChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 问题列表 -->
                <div id="issues" class="mb-4">
                    <div class="bg-white rounded-xl p-6 card-shadow">
                        <div class="flex justify-between items-center mb-6">
                            <div class="flex items-center"><h2 class="text-xl font-bold text-black">问题清单</h2><div class="loading-box ml-2"><i class="fa fa-list-alt fa-spin text-lg"></i></div></div>
                            <button id="add-task-btn" class="bg-primary text-white rounded-lg px-4 py-2 flex items-center hover:bg-primary/90 transition-colors">
                                <i class="fa fa-plus mr-2"></i> 提交新问题
                            </button>
                        </div>
                        <div class="flex flex-col md:flex-row md:items-center justify-between mb-6 space-y-3 md:space-y-0">
                            <div class="flex items-center space-x-2">
                                <button class="px-3 py-1 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors" onclick="filterTasks('all')">
                                    全部
                                </button>
                                <button class="px-3 py-1 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors" onclick="filterTasks('pending')">
                                    待处理
                                </button>
                                <button class="px-3 py-1 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors" onclick="filterTasks('processing')">
                                    处理中
                                </button>
                                <button class="px-3 py-1 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors" onclick="filterTasks('solved')">
                                    已解决
                                </button>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button class="px-3 py-1 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors" onclick="sortTasks('priority')">
                                    按所有优先级排序
                                </button>
                                <button class="px-3 py-1 text-sm rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors" onclick="filterByCategory('all')">
                                    所有分类
                                </button>
                            </div>
                        </div>

                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">问题ID</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">标题</th>
                                        
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">分类</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">优先级</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">创建时间</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="issue-table-body" class="bg-white divide-y divide-gray-200">
                                    <!-- 动态任务行将通过JavaScript渲染 -->
                                </tbody>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <div class="flex items-center">
                                                <img src="https://picsum.photos/32/32?random=2" alt="客户头像" class="w-6 h-6 rounded-full mr-2">
                                                李四
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">性能问题</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-orange-100 text-orange-800">高</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">已分配</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2023-06-27 14:15</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <button class="text-primary hover:text-primary/80 mr-3">查看</button>
                                            <button class="text-gray-500 hover:text-gray-700">编辑</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 transition-colors">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#IT-20230626003</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">用户登录验证失败</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <div class="flex items-center">
                                                <img src="https://picsum.photos/32/32?random=3" alt="客户头像" class="w-6 h-6 rounded-full mr-2">
                                                王五
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">功能异常</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">中</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">已解决</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2023-06-26 10:45</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <button class="text-primary hover:text-primary/80 mr-3">查看</button>
                                            <button class="text-gray-500 hover:text-gray-700">编辑</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 transition-colors">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#IT-20230625004</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">系统安全漏洞检测</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <div class="flex items-center">
                                                <img src="https://picsum.photos/32/32?random=4" alt="客户头像" class="w-6 h-6 rounded-full mr-2">
                                                赵六
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">安全漏洞</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">紧急</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">已关闭</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2023-06-25 16:20</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <button class="text-primary hover:text-primary/80 mr-3">查看</button>
                                            <button class="text-gray-500 hover:text-gray-700">编辑</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50 transition-colors">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#IT-20230624005</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">报表生成缓慢</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <div class="flex items-center">
                                                <img src="https://picsum.photos/32/32?random=5" alt="客户头像" class="w-6 h-6 rounded-full mr-2">
                                                孙七
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">性能问题</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">中</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">已解决</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2023-06-24 11:10</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                            <button class="text-primary hover:text-primary/80 mr-3">查看</button>
                                            <button class="text-gray-500 hover:text-gray-700">编辑</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="flex justify-between items-center mt-6">
                            <div class="text-sm text-gray-500">
                                显示 1 至 5 条，共 48 条
                            </div>
                            <div id="pagination-container" class="flex space-x-1">
                                <button class="px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                    <i class="fa fa-chevron-left"></i>
                                </button>
                                <button class="px-3 py-1 border border-primary bg-primary text-white rounded-md">1</button>
                                <button class="px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50">2</button>
                                <button class="px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50">3</button>
                                <button class="px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50">4</button>
                                <button class="px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50">5</button>
                                <button class="px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50">
                                    <i class="fa fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>



                    </div>
                </section>
                </div>
            </main>
        </div>
    </div>

    <!-- 右侧任务详情面板 -->
    <div id="task-detail-panel" class="fixed right-0 top-0 h-full w-72 bg-white shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-40 border-l border-gray-200">
        <!-- 面板头部 -->
        <div class="p-4 border-b border-gray-200 flex justify-between items-center">
            <h3 class="text-sm font-semibold text-gray-800">任务详情</h3>
            <button id="close-panel-btn" class="text-gray-400 hover:text-gray-600">
                <i class="fa fa-times"></i>
            </button>
        </div>
        
        <!-- 面板内容 -->
        <div class="p-4 overflow-y-auto h-[calc(100%-4rem)]">
            <div class="mb-4 flex justify-between items-center">
                <h3 class="text-sm font-semibold text-gray-800">待处理任务</h3>
                <span id="task-count" class="px-2 py-0.5 text-xs rounded-full bg-primary/10 text-primary">0</span>
            </div>

            <!-- 任务列表 -->
            <div id="task-list" class="space-y-3">
                <!-- 任务项模板 -->
                <div class="task-item bg-gray-50 p-3 rounded-lg border border-gray-200 hidden">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="text-sm font-medium text-gray-900 task-title">任务标题</h4>
                        <span class="px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-800 task-status">待处理</span>
                    </div>
                    <div class="text-xs text-gray-500 space-y-1 mb-3">
                        <p><i class="fa fa-clock-o mr-1"></i> 创建时间: <span class="task-create-time">2025-07-02 10:30:00</span></p>
                        <p><i class="fa fa-clock-o mr-1"></i> 预计时间: <span class="task-estimated-time">120</span> 分钟</p>
                    </div>
                    <div class="flex justify-between items-center">
                        <select class="task-status-select text-xs px-2 py-1 rounded border border-gray-300 focus:outline-none focus:ring-1 focus:ring-primary">
                            <option value="pending" selected>待处理</option>
                            <option value="processing">处理中</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- 空状态提示 -->
            <div id="empty-state" class="text-center py-10 text-gray-400">
                <i class="fa fa-inbox text-3xl mb-2"></i>
                <p class="text-sm">暂无待处理任务</p>
            </div>
        </div>
        </div>
    </div>

    <!-- 面板展开触发器 -->
    <button id="toggle-panel-btn" class="fixed right-0 top-1/2 transform -translate-y-1/2 bg-primary text-white p-2 rounded-l-lg shadow-md z-30">
        <i class="fa fa-chevron-left"></i>
    </button>

    <!-- 查看任务模态框 -->
<div id="view-task-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold text-black">查看问题详情</h3>
            <button onclick="document.getElementById('view-task-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
                <i class="fa fa-times"></i>
            </button>
        </div>
        <div class="space-y-4">
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <p class="text-sm text-gray-500">问题ID</p>
                    <p id="view-task-code" class="font-medium"></p>
                </div>
                <div>
                    <p class="text-sm text-gray-500">创建时间</p>
                    <p id="view-task-create-time" class="font-medium"></p>
                </div>
            </div>
            <div>
                <p class="text-sm text-gray-500">问题标题</p>
                <p id="view-task-title" class="font-medium"></p>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <p class="text-sm text-gray-500">分类</p>
                    <p id="view-task-category" class="font-medium"></p>
                </div>
                <div>
                    <p class="text-sm text-gray-500">优先级</p>
                    <p id="view-task-priority" class="font-medium"></p>
                </div>
            </div>
            <div>
                <p class="text-sm text-gray-500">状态</p>
                <p id="view-task-status" class="font-medium"></p>
            </div>
            <div>
                <p class="text-sm text-gray-500">问题描述</p>
                <p id="view-task-description" class="font-medium"></p>
            </div>
        </div>
    </div>
</div>

<!-- 编辑任务模态框 -->
<div id="edit-task-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-bold text-black">编辑问题</h3>
            <button onclick="document.getElementById('edit-task-modal').classList.add('hidden')" class="text-gray-400 hover:text-gray-600">
                <i class="fa fa-times"></i>
            </button>
        </div>
        <form id="edit-task-form" class="space-y-4">
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">问题ID</label>
                    <input type="text" id="edit-task-code" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" readonly>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">开始时间</label>
                    <input type="datetime-local" id="edit-task-date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" required>
                </div>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">问题标题</label>
                <input type="text" id="edit-task-title" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" required>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">分类</label>
                    <select id="edit-task-category" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" required>
                        <option>系统故障</option>
                        <option>性能问题</option>
                        <option>安全漏洞</option>
                        <option>功能异常</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">优先级</label>
                    <select id="edit-task-priority" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" required>
                        <option>紧急</option>
                        <option>高</option>
                        <option>中</option>
                        <option>低</option>
                    </select>
                </div>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">状态</label>
                <select id="edit-task-status" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" required>
                    <option value="pending">待处理</option>
                    <option value="processing">处理中</option>
                    <option value="solved">已解决</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">问题描述</label>
                <textarea id="edit-task-description" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" required></textarea>
            </div>
            <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200">
                <button type="button" onclick="document.getElementById('edit-task-modal').classList.add('hidden')" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">取消</button>
                <button type="submit" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">保存修改</button>
            </div>
        </form>
    </div>
</div>

<!-- 新增问题模态框 -->
    <div id="add-task-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative">
            <div class="p-6 border-b border-gray-200 flex justify-between items-center">
                <h2 class="text-xl font-bold text-black">提交新问题</h2>
                <button id="close-modal-btn" class="text-gray-400 hover:text-gray-600">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <div class="p-6">
                <form id="task-form">
                    <div class="mb-4">
                        <label class="block text-xs font-medium text-gray-700 mb-1">单据编码</label>
                        <input type="text" id="task-code" class="w-full px-3 py-1 rounded-md border border-gray-300 bg-gray-100 text-xs" readonly>
                    </div>
                    <div class="mb-4">
                        <label class="block text-xs font-medium text-gray-700 mb-1">问题标题<span class="text-red-500">*</span></label>
                        <input type="text" id="task-title" class="w-full px-3 py-1 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary text-xs" placeholder="请输入问题标题" required>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-xs font-medium text-gray-700 mb-1">提问人<span class="text-red-500">*</span></label>
                            <input type="text" id="task-reporter" class="w-full px-3 py-1 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary text-xs" placeholder="请输入提问人" required>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-700 mb-1">问题分类<span class="text-red-500">*</span></label>
                            <select id="task-category" class="w-full px-3 py-1 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary text-xs" required>
                                <option value="" selected disabled>请选择</option>
                                <option>系统故障</option>
                                <option>性能问题</option>
                                <option>功能需求</option>
                                <option>其他问题</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-xs font-medium text-gray-700 mb-1">优先级<span class="text-red-500">*</span></label>
                            <select id="task-priority" class="w-full px-3 py-1 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary text-xs" required>
                                <option value="" selected disabled>请选择</option>
                                <option>紧急</option>
                                <option>高</option>
                                <option>中</option>
                                <option>低</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-gray-700 mb-1">开始时间<span class="text-red-500">*</span></label>
                        <input type="datetime-local" id="task-date" class="w-full px-3 py-1 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary text-xs" required>
                    </div>
                    <div>
                        <label class="block text-xs font-medium text-gray-700 mb-1">预计所需时间（分钟）<span class="text-red-500">*</span></label>
                        <input type="number" id="task-estimated-time" class="w-full px-3 py-1 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary text-xs" placeholder="请输入分钟数" required>
                    </div>
                </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block text-xs font-medium text-gray-700 mb-1">解决状态</label>
                            <select id="task-status" class="w-full px-3 py-1 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary text-xs">
                                <option value="pending" selected>待处理</option>
                                <option value="processing">处理中</option>
                                <option value="resolved">已解决</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-xs font-medium text-gray-700 mb-1">问题描述<span class="text-red-500">*</span></label>
                        <textarea id="task-description" rows="3" class="w-full px-3 py-1 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary text-xs" placeholder="请详细描述问题..." required></textarea>
                    </div>

                                <div class="flex justify-end space-x-3 mt-4">
                    <button id="cancel-task-btn" class="px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors">
                        取消
                    </button>
                    <button type="submit" class="px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors">
                        提交问题
                    </button>
                </div>
            </form>

            </div>
        </div>
    </div>

    <script>
        // 初始化图表
        document.addEventListener('DOMContentLoaded', function() {
            // 趋势图表
            const trendCtx = document.getElementById('trendChart').getContext('2d');
            const trendChart = new Chart(trendCtx, {
                type: 'bar',
                data: {
                    labels: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                    datasets: [
                        {
                            label: '新增问题',
                            data: [8, 5, 12, 6, 9, 3, 5],
                            borderColor: '#1677ff',
                            backgroundColor: 'rgba(22, 119, 255, 0.6)',
                            tension: 0.4
                        },
                        {
                            label: '已解决问题',
                            data: [6, 7, 9, 4, 10, 2, 4],
                            borderColor: '#52c41a',
                            backgroundColor: 'rgba(82, 196, 26, 0.6)',
                            tension: 0.4,
        
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                drawBorder: false,
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // 周/月视图切换
            document.getElementById('calendar-week-btn').addEventListener('click', function() {
                trendChart.data.labels = ['周一', '周二', '周三', '周四', '周五', '周六', '周日'];
                trendChart.data.datasets[0].data = [8, 5, 12, 6, 9, 3, 5];
                trendChart.data.datasets[1].data = [6, 7, 9, 4, 10, 2, 4];
                trendChart.update();
                this.classList.add('bg-primary/10', 'text-primary');
                this.classList.remove('hover:bg-gray-100');
                document.getElementById('calendar-month-btn').classList.remove('bg-primary/10', 'text-primary');
                document.getElementById('calendar-month-btn').classList.add('hover:bg-gray-100');
            });

            document.getElementById('calendar-month-btn').addEventListener('click', function() {
                // 生成本月日期标签
                const daysInMonth = new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).getDate();
                const monthLabels = Array.from({length: daysInMonth}, (_, i) => `${i+1}日`);
                
                trendChart.data.labels = monthLabels;
                trendChart.data.datasets[0].data = Array.from({length: daysInMonth}, () => Math.floor(Math.random() * 15) + 3);
                trendChart.data.datasets[1].data = Array.from({length: daysInMonth}, () => Math.floor(Math.random() * 12) + 2);
                trendChart.update();
                this.classList.add('bg-primary/10', 'text-primary');
                this.classList.remove('hover:bg-gray-100');
                document.getElementById('calendar-week-btn').classList.remove('bg-primary/10', 'text-primary');
                document.getElementById('calendar-week-btn').classList.add('hover:bg-gray-100');
            });

            // 分类饼图
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            new Chart(categoryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['系统故障', '性能问题', '安全漏洞', '功能异常', '其他问题'],
                    datasets: [{
                        data: [35, 25, 15, 20, 5],
                        backgroundColor: [
                            '#1677ff',
                            '#69b1ff',
                            '#ff4d4f',
                            '#faad14',
                            '#52c41a'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        }
                    },
                    cutout: '70%'
                }
            });

            // 移动端菜单切换
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const aside = document.querySelector('aside');
            
            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', function() {
                    aside.classList.toggle('hidden');
                    aside.classList.toggle('fixed');
                    aside.classList.toggle('inset-y-0');
                    aside.classList.toggle('left-0');
                    aside.classList.toggle('z-50');
                });
            }

            // 模态框控制
            const addTaskBtn = document.getElementById('add-task-btn');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const cancelTaskBtn = document.getElementById('cancel-task-btn');
            const addTaskModal = document.getElementById('add-task-modal');
            
            if (addTaskBtn && closeModalBtn && cancelTaskBtn && addTaskModal) {
                addTaskBtn.addEventListener('click', function() {
                    addTaskModal.classList.remove('hidden');
                });
                
                closeModalBtn.addEventListener('click', function() {
                    addTaskModal.classList.add('hidden');
                });
                
                cancelTaskBtn.addEventListener('click', function() {
                    addTaskModal.classList.add('hidden');
                });
                
                // 点击模态框外部关闭
                addTaskModal.addEventListener('click', function(e) {
                    if (e.target === addTaskModal) {
                        addTaskModal.classList.add('hidden');
                    }
                });
            }
        });
    </script>
    <script>
    // 页面加载时渲染主表格任务
    document.addEventListener('DOMContentLoaded', function() {
        renderIssueTable();
    });

    // 渲染主问题列表表格
    function renderIssueTable(filteredTasks = null) {
        const tableBody = document.getElementById('issue-table-body');
        const tasksToRender = filteredTasks || JSON.parse(localStorage.getItem('tasks')) || [];

        tableBody.innerHTML = '';

        if (tasksToRender.length === 0) {
            const emptyRow = document.createElement('tr');
            emptyRow.innerHTML = '<td colspan="7" class="px-6 py-8 text-center text-gray-500">暂无任务数据</td>';
            tableBody.appendChild(emptyRow);
            return;
        }

        tasksToRender.forEach(task => {
            const row = document.createElement('tr');
            row.className = 'hover:bg-blue-50 transition-all duration-200 even:bg-gray-50';
            row.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#${task.code}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${task.title}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${task.category}</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getPriorityClass(task.priority)}">${task.priority}</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusClass(task.status)}">${getStatusText(task.status)}</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${task.createTime}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <button class="text-primary hover:text-primary/80 mr-3" onclick="viewTask('${task.code}')">查看</button>
                    <button class="text-gray-500 hover:text-gray-700" onclick="editTask('${task.code}')">编辑</button>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }

    // 获取优先级样式类
    function getPriorityClass(priority) {
        const classes = {
            '紧急': 'bg-red-100 text-red-800',
            '高': 'bg-orange-100 text-orange-800',
            '中': 'bg-yellow-100 text-yellow-800',
            '低': 'bg-green-100 text-green-800'
        };
        return classes[priority] || 'bg-gray-100 text-gray-800';
    }

    // 获取状态样式类
    function getStatusClass(status) {
        const classes = {
            'pending': 'bg-gray-100 text-gray-800',
            'processing': 'bg-yellow-100 text-yellow-800',
            'solved': 'bg-green-100 text-green-800'
        };
        return classes[status] || 'bg-gray-100 text-gray-800';
    }

    // 获取状态文本
    function getStatusText(status) {
        const texts = {
            'pending': '待处理',
            'processing': '处理中',
            'solved': '已解决'
        };
        return texts[status] || status;
    }
</script>
<script src="script.js"></script>
</body>
</html>
    